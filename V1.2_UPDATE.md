# Version 1.2.0 Update - Break Handling

## 🆕 What's New

Your Chrome extension now **automatically excludes break periods** from calendar exports!

## 📅 Updated Semester Dates

### Rule-Based System

The extension now uses accurate semester dates with break handling:

| Semester | Periods | What's Excluded |
|----------|---------|-----------------|
| **2025 AUTUMN** | Sept 5 - Nov 19 | *(No breaks)* |
| **2025 WINTER** | Dec 5-19, 2025<br>Jan 6 - Mar 3, 2026 | ❌ Winter Break<br>(Dec 20 - Jan 5) |
| **2026 SPRING** | Apr 11 - May 1, 2026<br>May 7 - Jun 25, 2026 | ❌ Golden Week<br>(May 2-6) |

## ✨ Key Improvements

### 1. Smart Event Generation
```
Before v1.2:
  Dec 5  ✓ Event created
  Dec 12 ✓ Event created
  Dec 19 ✓ Event created
  Dec 26 ✓ Event created ← WRONG (winter break!)
  Jan 2  ✓ Event created ← WRONG (winter break!)
  Jan 9  ✓ Event created

After v1.2:
  Dec 5  ✓ Event created
  Dec 12 ✓ Event created
  Dec 19 ✓ Event created
  Dec 26 ✗ Skipped (winter break)
  Jan 2  ✗ Skipped (winter break)
  Jan 9  ✓ Event created
```

### 2. Auto-Detection Enhanced
When you open the extension:
- Reads "2025 WINTER" from page
- Sets dates: Dec 5, 2025 - Mar 3, 2026
- Shows: "Auto-detected: 2025 WINTER (includes 2 periods, breaks excluded)"
- Events only created for valid class dates

### 3. Multi-Period Support
Semesters can now have multiple active periods with breaks in between:

```javascript
'2025 WINTER': {
  periods: [
    { start: '2025-12-05', end: '2025-12-19' },  // Period 1
    { start: '2026-01-06', end: '2026-03-03' }   // Period 2
  ]
}
```

## 🔧 What Changed in Code

### New Data Structure
```javascript
// Old (v1.1):
'2025 WINTER': { start: '2025-12-01', end: '2026-02-15' }

// New (v1.2):
'2025 WINTER': {
  periods: [
    { start: '2025-12-05', end: '2025-12-19' },
    { start: '2026-01-06', end: '2026-03-03' }
  ]
}
```

### New Functions
- `isDateInSemester(date, semesterData)` - Checks if date is valid
- `getSemesterRange(semesterData)` - Gets overall date range
- Enhanced `generateICS()` - Skips break periods

## 📊 Real-World Impact

### Example: ISC221 Course
- **Schedule:** Wednesday 15:25-16:40
- **Semester:** 2025 WINTER

**Events Created:**
```
✓ Dec 5   (Period 1)
✓ Dec 12  (Period 1)
✓ Dec 19  (Period 1)
✗ Dec 26  [WINTER BREAK - skipped]
✗ Jan 2   [WINTER BREAK - skipped]
✓ Jan 9   (Period 2)
✓ Jan 16  (Period 2)
✓ Jan 23  (Period 2)
... continues through Mar 3
```

**Result:** ~18 events (not 26!) - Only actual class dates!

## 🎯 How to Use

### Nothing Changed for You!
1. Open extension on timetable page
2. Click export
3. Import to calendar
4. **Breaks are excluded automatically!** ✨

### Manual Override Still Works
- Dates are auto-filled but editable
- Change them if needed
- Break handling applies to recognized semesters

## 📝 Adding Future Semesters

When new semester dates are announced, update `popup.js`:

```javascript
const SEMESTER_DATES = {
  // Existing semesters...
  
  // Add new semester:
  '2026 FALL': {
    periods: [
      { start: '2026-09-07', end: '2026-11-20' }
    ]
  }
};
```

### With Breaks:
```javascript
'2027 WINTER': {
  periods: [
    { start: '2026-12-07', end: '2026-12-21' },
    { start: '2027-01-07', end: '2027-03-05' }
  ]
}
```

## ✅ Benefits

### For Students
- ✅ **Accurate calendar** - No events during breaks
- ✅ **Zero manual work** - Automatic exclusion
- ✅ **Clean schedule** - Only real class dates

### For Developers
- ✅ **Easy maintenance** - Update periods when announced
- ✅ **Flexible system** - Any number of breaks supported
- ✅ **Clear structure** - Self-documenting code

## 🔍 Technical Details

### Break Detection Algorithm
```
For each course and time slot:
  For each week from start to end:
    Calculate event date
    If semester data exists:
      Check if date falls in any period
      Skip if not in valid period
    Create event only if date is valid
```

### Data Flow
```
Page → "2025 WINTER" → Lookup periods → Set dates → 
Generate events → Check each date → Skip breaks → 
Download ICS with valid events only
```

## 📚 Documentation

**New Files:**
- `BREAK_HANDLING.md` - Comprehensive guide

**Updated Files:**
- `README.md` - New semester dates
- `INSTALL.md` - Updated customization
- `CHANGELOG.md` - Version history
- `manifest.json` - v1.2.0

## 🚀 Installation

### First Time
Load the extension as before - no changes needed!

### Updating from v1.1
1. Go to `chrome://extensions/`
2. Click refresh icon ⟳ on Timetable Exporter
3. Done! New version active

## 🎉 Summary

**Version 1.2.0** brings intelligent break handling to your timetable exports:

- 🎯 **Rule-based system** for current and future semesters
- 🚫 **Auto-excludes breaks** (winter break, golden week)
- 📅 **Accurate dates** for 2025 Autumn, Winter, and 2026 Spring
- 🔧 **Easy to update** when new dates are announced
- ✨ **Works automatically** - no user action needed

Your calendar exports are now more accurate than ever!

---

**Version:** 1.2.0  
**Release Date:** October 13, 2025  
**Key Feature:** Rule-based break handling  
**Semesters Supported:** 2025 Autumn, 2025 Winter, 2026 Spring

